# Story 4.5: Executive Summary Tab

## Status: Draft

## Assigned To: Grace

## Story

**As an** executive,
**I want** a simplified dashboard view,
**so that** I can understand key metrics in under 30 seconds.

## Acceptance Criteria

1. Left panel collapsed by default (can expand if needed)
2. Center panel: Summary Dashboard (NOT chat interface)
   - Profit Uplift headline metric (large, prominent)
   - Key Insight narrative paragraph
   - Segment Performance comparison chart
3. Right panel: KPI Cards
   - Total Profit Uplift percentage
   - Recommendations analyzed count
   - Compliance rate (100%)
   - Risk Alerts (if any)
4. Share Report and Download PDF buttons (can be mock for hackathon)
5. Data refreshes automatically on tab switch

## Tasks / Subtasks

- [ ] Task 1: Create executive page structure (AC: 1)
  - [ ] Create `frontend/src/app/executive/page.tsx`
  - [ ] Override default panel states (left collapsed)
  - [ ] Set up layout for executive view

- [ ] Task 2: Create Summary Dashboard (AC: 2)
  - [ ] Create `frontend/src/components/executive/SummaryDashboard.tsx`
  - [ ] Large headline metric for profit uplift
  - [ ] Key insight narrative section
  - [ ] Clean, executive-friendly styling

- [ ] Task 3: Create Profit Uplift Hero (AC: 2)
  - [ ] Create `ProfitUpliftHero.tsx`
  - [ ] Large number display (e.g., "+24.3%")
  - [ ] Comparison to baseline
  - [ ] Trend indicator

- [ ] Task 4: Create Key Insight Section (AC: 2)
  - [ ] Create `KeyInsight.tsx`
  - [ ] Display narrative paragraph
  - [ ] Highlight key numbers
  - [ ] Pull from latest recommendation

- [ ] Task 5: Create Segment Performance Chart (AC: 2)
  - [ ] Create `SegmentPerformanceChart.tsx`
  - [ ] Grouped bar chart comparing segments
  - [ ] Show profit uplift per segment
  - [ ] Use Recharts

- [ ] Task 6: Create KPI Cards Panel (AC: 3)
  - [ ] Create `KPIPanel.tsx`
  - [ ] Create individual `KPICard.tsx` component
  - [ ] Total Profit Uplift card
  - [ ] Recommendations Analyzed card
  - [ ] Compliance Rate card (always 100%)
  - [ ] Risk Alerts card

- [ ] Task 7: Add action buttons (AC: 4)
  - [ ] Create "Share Report" button (mock mailto)
  - [ ] Create "Download PDF" button (mock or basic implementation)
  - [ ] Style as prominent CTAs

- [ ] Task 8: Implement data refresh (AC: 5)
  - [ ] Fetch latest data on tab switch
  - [ ] Use useEffect with tab dependency
  - [ ] Show loading state during fetch

## Dev Notes

### Component Structure
```
frontend/src/components/executive/
├── SummaryDashboard.tsx      # Center panel content
├── ProfitUpliftHero.tsx      # Large metric display
├── KeyInsight.tsx            # Narrative paragraph
├── SegmentPerformanceChart.tsx # Comparison chart
├── KPIPanel.tsx              # Right panel KPIs
├── KPICard.tsx               # Individual metric card
└── ExecutiveActions.tsx      # Share/Download buttons
```

### Page Layout (Executive View)
```tsx
// app/executive/page.tsx
'use client';

import { useEffect } from 'react';
import { useLayoutStore } from '@/stores/layoutStore';
import { SummaryDashboard } from '@/components/executive/SummaryDashboard';
import { KPIPanel } from '@/components/executive/KPIPanel';

export default function ExecutivePage() {
  const { setLeftCollapsed } = useLayoutStore();
  
  // Collapse left panel on mount
  useEffect(() => {
    setLeftCollapsed(true);
  }, []);
  
  return (
    <>
      {/* Center Content */}
      <SummaryDashboard />
      
      {/* Right Panel Content (passed to RightPanel) */}
      <KPIPanel />
    </>
  );
}
```

### Profit Uplift Hero
```tsx
// ProfitUpliftHero.tsx
export function ProfitUpliftHero({ value, baseline }: Props) {
  const isPositive = value > 0;
  
  return (
    <div className="text-center py-8">
      <p className="text-sm text-muted-foreground uppercase tracking-wide">
        Total Profit Uplift
      </p>
      <p className={cn(
        "text-7xl font-bold mt-2",
        isPositive ? "text-green-500" : "text-red-500"
      )}>
        {isPositive ? '+' : ''}{value.toFixed(1)}%
      </p>
      <p className="text-sm text-muted-foreground mt-2">
        vs. ${baseline.toFixed(2)} baseline
      </p>
    </div>
  );
}
```

### Key Insight Narrative
```tsx
// KeyInsight.tsx
export function KeyInsight({ insight }: { insight: string }) {
  return (
    <Card className="bg-primary-50 dark:bg-primary-950 border-primary-200">
      <CardHeader>
        <CardTitle className="text-lg">Key Insight</CardTitle>
      </CardHeader>
      <CardContent>
        <p className="text-base leading-relaxed">
          {insight}
        </p>
      </CardContent>
    </Card>
  );
}

// Example insight:
// "Dynamic pricing optimization delivered a 24.3% profit improvement 
// across 150 recommendations. Urban Peak Premium segment showed the 
// highest gains (+32%), while Rural segments benefited from fairness 
// constraints maintaining customer satisfaction."
```

### KPI Card Component
```tsx
// KPICard.tsx
interface KPICardProps {
  title: string;
  value: string | number;
  subtitle?: string;
  icon?: React.ReactNode;
  trend?: 'up' | 'down' | 'neutral';
}

export function KPICard({ title, value, subtitle, icon, trend }: KPICardProps) {
  return (
    <Card>
      <CardContent className="pt-6">
        <div className="flex items-center gap-2">
          {icon}
          <span className="text-sm text-muted-foreground">{title}</span>
        </div>
        <p className="text-2xl font-bold mt-2">{value}</p>
        {subtitle && (
          <p className="text-xs text-muted-foreground mt-1">{subtitle}</p>
        )}
      </CardContent>
    </Card>
  );
}
```

### Mock Data for Demo
```typescript
const executiveData = {
  profitUplift: 24.3,
  baseline: 35.0,
  recommendationsAnalyzed: 150,
  complianceRate: 100,
  riskAlerts: 0,
  keyInsight: "Dynamic pricing optimization delivered a 24.3% profit improvement...",
  segmentPerformance: [
    { segment: "Urban Peak", uplift: 32 },
    { segment: "Urban Standard", uplift: 28 },
    { segment: "Suburban Peak", uplift: 22 },
    { segment: "Suburban Standard", uplift: 18 },
    { segment: "Rural", uplift: 12 },
  ]
};
```

### Testing

- Test file: `frontend/tests/unit/executive/SummaryDashboard.test.tsx`
- Test left panel collapses on mount
- Test KPI cards render
- Test data refresh on tab switch

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-02 | 1.0 | Initial story creation | SM Agent |

## Dev Agent Record

### Agent Model Used
(To be filled by Dev Agent)

### Debug Log References
(To be filled by Dev Agent)

### Completion Notes List
(To be filled by Dev Agent)

### File List
(To be filled by Dev Agent)

## QA Results
(To be filled by QA Agent)

